import{R as e}from"./index-CIWIA-pi.js";import{c as i,m as s}from"./store.CmmNAAzQ.js";import{p as t}from"./uni-cloud.es.B_W3E-Ew.js";const n={data:()=>({config:i,uniIdRedirectUrl:"/"+t.uniIdRouter.首页,isMounted:!1}),onUnload(){document.onkeydown=!1},mounted(){this.isMounted=!0},onLoad(i){if(i.is_weixin_redirect){if(e({mask:!0}),window.location.href.includes("#")){window.location.href.split("?")[1].split("&").forEach((e=>{const s=e.split("=");"code"==s[0]&&(i.code=s[1])}))}this.$nextTick((e=>{this.$refs.uniFabLogin.login({code:i.code},"weixin")}))}i.uniIdRedirectUrl&&(this.uniIdRedirectUrl=decodeURIComponent(i.uniIdRedirectUrl))},computed:{needAgreements(){if(this.isMounted)return!!this.$refs.agreements&&this.$refs.agreements.needAgreements},agree:{get(){if(this.isMounted)return!this.$refs.agreements||this.$refs.agreements.isAgree},set(e){this.$refs.agreements?this.$refs.agreements.isAgree=e:console.log("不存在 隐私政策协议组件")}}},methods:{loginSuccess(e){s.loginSuccess({...e,uniIdRedirectUrl:this.uniIdRedirectUrl})},"注册成功"(e){s.loginSuccess({...e,uniIdRedirectUrl:this.uniIdRedirectUrl,toastText:"注册成功"})}}};export{n as m};
