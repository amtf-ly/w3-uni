import{N as a,k as e,l as t,o as s,c,w as o,a as l,g as n,n as i,h as p,e as u,a7 as h}from"./index-CIWIA-pi.js";import{V as r}from"./uni-cloud.es.B_W3E-Ew.js";import{_ as m}from"./uni-icons.FDEwJa58.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const d=g({props:{modelValue:String,value:String,scene:{type:String,default:()=>""},focus:{type:Boolean,default:()=>!1}},computed:{val:{get(){return this.value||this.modelValue},set(a){this.$emit("update:modelValue",a)}}},data:()=>({focusCaptchaInput:!1,captchaBase64:"",loging:!1}),watch:{scene:{handler(e){e?this.getImageCaptcha(this.focus):a({title:"scene不能为空",icon:"none"})},immediate:!0}},methods:{getImageCaptcha(e=!0){this.loging=!0,e&&(this.val="",this.focusCaptchaInput=!0);r.importObject("uni-captcha-co",{customUI:!0}).getImageCaptcha({scene:this.scene}).then((a=>{this.captchaBase64=a.captchaBase64})).catch((e=>{a({title:e.message,icon:"none"})})).finally((a=>{this.loging=!1}))}}},[["render",function(a,r,g,d,f,B){const C=e(t("uni-icons"),m),I=p,x=u,_=h;return s(),c(x,{class:"captcha-box"},{default:o((()=>[l(x,{class:"captcha-img-box"},{default:o((()=>[f.loging?(s(),c(C,{key:0,class:"loding",size:"20px",color:"#BBB",type:"spinner-cycle"})):n("",!0),l(I,{class:i(["captcha-img",{opacity:f.loging}]),onClick:B.getImageCaptcha,src:f.captchaBase64,mode:"widthFix"},null,8,["class","onClick","src"])])),_:1}),l(_,{onBlur:r[0]||(r[0]=a=>f.focusCaptchaInput=!1),focus:f.focusCaptchaInput,type:"text",class:"captcha",inputBorder:!1,maxlength:"4",modelValue:B.val,"onUpdate:modelValue":r[1]||(r[1]=a=>B.val=a),placeholder:"请输入验证码"},null,8,["focus","modelValue"])])),_:1})}],["__scopeId","data-v-07444ffa"]]);export{d as _};
