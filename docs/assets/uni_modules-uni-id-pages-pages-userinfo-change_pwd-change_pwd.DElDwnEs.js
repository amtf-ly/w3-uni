import{P as s,Q as o,a2 as a,M as e,k as r,l as t,c as d,w as l,e as n,o as u,a as i,d as m,h as w,i as f,O as c}from"./index-CIWIA-pi.js";import{V as p}from"./uni-cloud.es.B_W3E-Ew.js";import{_ as P}from"./uni-match-media.B_T6meol.js";import{_}from"./uni-easyinput.CJt8y4HP.js";import{_ as h}from"./uni-forms-item.DnUp95-v.js";import{_ as g}from"./uni-forms.M1boJhv0.js";import{m as j}from"./login-page.mixin.Cwl58H02.js";import{p as y}from"./password.DrN7_3y1.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.FDEwJa58.js";import"./store.CmmNAAzQ.js";const x=p.importObject("uni-id-co",{customUI:!0});const D=b({mixins:[j],data:()=>({focusOldPassword:!1,focusNewPassword:!1,focusNewPassword2:!1,formData:{oldPassword:"",newPassword:"",newPassword2:""},rules:{oldPassword:{rules:[{required:!0,errorMessage:"请输入新密码"},{pattern:/^.{6,20}$/,errorMessage:"密码为6 - 20位"}]},...y.getPwdRules("newPassword","newPassword2")},logo:"/static/logo.png"}),onReady(){this.$refs.form.setRules(this.rules)},onShow(){document.onkeydown=s=>{var o=s||window.event;o&&13==o.keyCode&&this.submit()}},methods:{submit(){this.$refs.form.validate().then((r=>{let{oldPassword:t,newPassword:d}=this.formData;x.updatePwd({oldPassword:t,newPassword:d}).then((e=>{s("uni_id_token"),o("uni_id_token_expired",0),a({url:"/uni_modules/uni-id-pages/pages/login/login-withpwd"})})).catch((s=>{e({content:s.message,showCancel:!1})}))})).catch((s=>{let o=s[0].key;o=o.replace(o[0],o[0].toUpperCase()),this["focus"+o]=!0}))}}},[["render",function(s,o,a,e,p,j){const y=w,b=n,x=f,D=r(t("uni-match-media"),P),V=r(t("uni-easyinput"),_),k=r(t("uni-forms-item"),h),v=c,B=r(t("uni-forms"),g);return u(),d(b,{class:"uni-content"},{default:l((()=>[i(D,{"min-width":690},{default:l((()=>[i(b,{class:"login-logo"},{default:l((()=>[i(y,{src:p.logo},null,8,["src"])])),_:1}),i(x,{class:"title title-box"},{default:l((()=>[m("修改密码")])),_:1})])),_:1}),i(B,{ref:"form",value:p.formData,"err-show-type":"toast"},{default:l((()=>[i(k,{name:"oldPassword"},{default:l((()=>[i(V,{focus:p.focusOldPassword,onBlur:o[0]||(o[0]=s=>p.focusOldPassword=!1),class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.oldPassword,"onUpdate:modelValue":o[1]||(o[1]=s=>p.formData.oldPassword=s),placeholder:"请输入旧密码"},null,8,["focus","modelValue"])])),_:1}),i(k,{name:"newPassword"},{default:l((()=>[i(V,{focus:p.focusNewPassword,onBlur:o[2]||(o[2]=s=>p.focusNewPassword=!1),class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.newPassword,"onUpdate:modelValue":o[3]||(o[3]=s=>p.formData.newPassword=s),placeholder:"请输入新密码"},null,8,["focus","modelValue"])])),_:1}),i(k,{name:"newPassword2"},{default:l((()=>[i(V,{focus:p.focusNewPassword2,onBlur:o[4]||(o[4]=s=>p.focusNewPassword2=!1),class:"input-box",type:"password",inputBorder:!1,modelValue:p.formData.newPassword2,"onUpdate:modelValue":o[5]||(o[5]=s=>p.formData.newPassword2=s),placeholder:"请再次输入新密码"},null,8,["focus","modelValue"])])),_:1}),i(v,{class:"uni-btn send-btn-box",type:"primary",onClick:j.submit},{default:l((()=>[m("提交")])),_:1},8,["onClick"])])),_:1},8,["value"])])),_:1})}],["__scopeId","data-v-310f3ac4"]]);export{D as default};
